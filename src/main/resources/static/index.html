<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Filmes NetFlix</title>
    
    <style>
      .filme-card img {
        height: 300px; /* Altura fixa para a capa */
        object-fit: cover; /* Garante que a imagem preencha o espaço sem distorcer */
      }
    </style>
  </head>
  <body>
    <div >
      <h1>Filmes em destaque</h1>
      <div id="lista-filmes">Carregando...</div>
    </div>
    <script>
      async function buscarFilmes() {
        const urlBackend = "http://localhost:8080/filmes";
        const listaFilmesDiv = document.getElementById("lista-filmes");

        try {
          const resposta = await fetch(urlBackend);
          const filmes = await resposta.json();
          listaFilmesDiv.innerHTML = "";

          filmes.forEach((filme) => {
            const URL_BASE_IMAGEM = "https://image.tmdb.org/t/p/w500";
            const urlCapaCompleta = URL_BASE_IMAGEM + filme.capa;

            const card = document.createElement("div");
            card.innerHTML = `
                        <img src="${urlCapaCompleta}" alt="${filme.titulo}">
                        <h2>${filme.titulo}</h2>
                        <p>Avaliação ${filme.mediaAvaliacoes}</p> 
                        <p>${filme.visaoGeral.substring(0, 100)}...</p>
                        <hr>
                    `;
            listaFilmesDiv.appendChild(card);
          });
        } catch (error) {
          console.error("Erro ao buscar filmes:", error);
          listaFilmesDiv.innerHTML = "Erro ao carregar os dados dos filmes.";
        }
      }
      buscarFilmes();
    </script>
  </body>
</html>
